with recursive base_tbl as ( select t1.role_name, t1.object_name, t1.priv from usr_priv_master t1 inner join usr_master t2 on t1.role_name = t2.role_name where current_date between t1.start_date and coalesce(t1.thru_date, '3999-12-31') and current_date between t2.start_date and coalesce(t2.thru_date, '3999-12-31')  union all select t2.child_role , t1.object_name, t1.priv from usr_role_rel t2, base_tbl t1 where t1.role_name = t2.parent_role) select * from base_tbl where role_name = ${user_name} and ${url} ~ object_name order by object_name desc limit 1
